
<header class="masthead mb-auto">
  <div class="inner">
    <h3 class="masthead-brand">GitHub Search for Teladoc</h3>
    <nav class="nav nav-masthead justify-content-center">
      <%= link_to "Home", root_path, class: "nav-link" %>
      <%= link_to "Search", searches_path, class: "nav-link active" %>
      <%= link_to "Logout", :logout, class: "nav-link" %>
    </nav>
  </div>
</header>

<main role="main" class="inner cover">
  <h1 class="cover-heading">Search GitHub</h1>

  <p class="lead">Enter a term below to search repositories on  GitHub</p>

  <div class="input-group mb-3">
    <%= form_tag searches_path, class: "form-inline" do %>
      <%= text_field_tag :query, nil, class: "form-control", 'aria-describedby' => "submit_btn", 'aria-label' => "Enter search query..." %>
      <div class="input-group-append">
        <%= submit_tag 'Search GitHub', class: "btn btn-outline-secondary", id: 'submit_btn' %>
      </div>
    <% end %>
  </div>

  <table class="table table-dark">
    <thead>
    <th>Repo Link</th>
    <th>Stars</th>
    <th class="d-none d-sm-table-cell">Language</th>
    <th class="d-none d-sm-table-cell">Watchers</th>
    <th class="d-none d-sm-table-cell">Forks</th>
    <th>Owner</th>

    </thead>
    <% if @response['items'] %>
      <% @response['items'].each do |response| %>
        <tr>
          <td><%= link_to response['name'], response['html_url'], target: '_blank' %></td>
          <td><%= response['stargazers_count'] %></td>
          <td class="d-none d-sm-table-cell"><%= response['language'] %></td>
          <td class="d-none d-sm-table-cell"><%= response['watchers'] %></td>
          <td class="d-none d-sm-table-cell"><%= response['forks'] %></td>
          <td>
            <%= link_to(image_tag(response['owner']['avatar_url'], size: "30x30"), response['owner']['html_url'], target: '_blank') %>
          </td>
        </tr>
      <% end %>
    <% end %>

  </table>
</main>

<%= render 'layouts/footer' %>
